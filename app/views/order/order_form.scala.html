@(frm:Form[models.order.OrderDesc], replyTo:Call, header:String)

@pdefInput(fld:Field, cls:String) = {
    <div class="@cls">
        @helper.inputText(fld("pdefid"))
        @helper.inputText(fld("count"))
        @helper.inputText(fld("filter"))
        <input type="hidden" id="@{fld("id").id}" name="@{fld("id").name}" value="@{fld("id").value}" />
        <a class="removePartDef">remove</a>
    </div>
}

@main("Order", views.ObjectType.Order) {
    <h3>
      @header order
    </h3>
	@helper.form(action = replyTo) {
		@helper.inputText(frm("name"))
		@helper.inputDate(frm("filling_date"))
		@helper.inputDate(frm("due_date"))
		
		<h4>Part definitions</h4>
		@helper.repeat(frm("odefs"), 0) { pdef =>
			@pdefInput(pdef, "partdef")
		}
		
		@pdefInput(frm("odefs[x]"), "partDefTemplate hidden")
	    <br />
        <a class="addButton" >Add part definition</a>
        <br />
	  	<input type="submit" value="Submit" />
	  	
	  	@helper.requireJs(core = routes.Assets.at("javascripts/require.js").url, module = routes.Assets.at("javascripts/orderForm").url)
	}

}
